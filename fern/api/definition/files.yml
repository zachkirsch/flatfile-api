# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

service:
  auth: false
  base-path: /files
  endpoints:
    getAll:
      path: ""
      method: GET
      display-name: List files
      request:
        name: GetAllFilesRequest
        query-parameters:
          spaceId: optional<string>
      response: Files

    create:
      path: ""
      method: POST
      display-name: Upload a file
      request:
        name: CreateFileRequest
        body:
          properties:
            spaceId: commons.SpaceId 
            environmentId: commons.EnvironmentId
            file:
              type: string #TODO support binary
              docs: A binary payload containing the file contents
      response: commons.File

    get:
      path: /{fileId}
      method: GET
      display-name: Get a file
      path-parameters:
        fileId: string
      response: commons.File

    delete:
      path: /{fileId}
      method: DELETE
      display-name: Delete a file
      path-parameters:
        fileId: string
      response: commons.Success

    update:
      path: /{fileId}
      method: PATCH
      docs: Update a file, to change the workbook id for example
      display-name: Update a file
      path-parameters:
        fileId:
          docs: ID of file to update
          type: string
      request:
        name: UpdateFileRequest
        body:
          properties:
            workbookId: commons.WorkbookId 
            status: commons.ModelFileStatusEnum
      response: commons.File

    download:
      path: /{fileId}/download
      method: GET
      display-name: Download a file
      path-parameters:
        fileId: string
      response: DownloadFile

types:
  Files:
    properties:
      data: optional<list<commons.File>>

  DownloadFile:
    docs: A binary payload containing the file contents
    type: string
