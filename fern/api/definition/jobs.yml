# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

service:
  auth: false
  base-path: /jobs
  endpoints:
    getAll:
      path: ""
      method: GET
      display-name: List jobs
      request:
        name: GetJobsRequest
        query-parameters:
          environmentId: optional<string>
          spaceId: optional<string>
          workbookId: optional<string>
          fileId: optional<string>
      response: Jobs

    create:
      path: ""
      method: POST
      display-name: Create a job
      request:
        name: CreatJobRequest
        body: commons.Job
      response: commons.Job

    get:
      path: /{jobId}
      method: GET
      display-name: Get a job
      path-parameters:
        jobId: string
      response: commons.Job

    delete:
      path: /{jobId}
      method: DELETE
      display-name: Delete a job
      path-parameters:
        jobId: string
      response: commons.Success

    getExecutionPlan:
      path: /{jobId}/plan
      method: GET
      docs: Returns a single job's execution plan
      display-name: Get a job's execution plan
      path-parameters:
        jobId:
          docs: ID of job to return
          type: string
      response: JobPlanObject

    updateExecutionPlan:
      path: /{jobId}/plan
      method: PUT
      docs: Update a job's entire execution plan
      display-name: Replace a job's plan
      path-parameters:
        jobId:
          docs: ID of job to return
          type: string
      request:
        name: UpdateJobExecutionPlanRequest
        body: commons.Plan

    updateExecutionPlanFields:
      path: /{jobId}/plan
      method: PATCH
      docs: Update a one or more individual fields on a job's execution plan
      display-name: Update a job's plan
      path-parameters:
        jobId:
          docs: ID of job to return
          type: string
      request:
        name: UpdateExecutionPlanFieldsRequest
        body: commons.Plan

    executeJob:
      path: /{jobId}/execute
      method: POST
      docs: Execute a job and return the job
      display-name: Execute a job
      path-parameters:
        jobId:
          docs: ID of job to return
          type: string

types:
  Jobs:
    properties:
      data: optional<list<commons.Job>>

  JobPlanObject:
    properties:
      data: optional<commons.JobPlan>
